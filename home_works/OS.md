## 4.1. Операционные системы, лекция 1
 
1 - Какой системный вызов делает команда `cd`  
__Result__: `chdir("/tmp»)`

2 - Используя strace выясните, где находится база данных file на основании которой она делает свои догадки  
__Result__: Кажется, что `/lib/x86_64-linux-gnu/libmagic.so`

3 - Основываясь на знаниях о перенаправлении потоков предложите способ обнуления открытого удаленного файла (чтобы освободить место на файловой системе).  
__Result__: Перенаправить файловый дескриптор в удаленный файл: `cat /proc/<PID>/fd/3 > <deleted filepath>`
Но как это работает до конца непонятно, в случае если постоянно пишется что-то в файл - это все равно сработает?

4 - Занимают ли зомби-процессы какие-то ресурсы в ОС (CPU, RAM, IO)  
__Result__: Кажется, что нет, так они закрываются (освобождают ресурсы), но не обрабатываются родителем.
Возможно, есть ресурсы в виде `/proc/*` файлов, в которых хранится информация

5 - На какие файлы вы увидели вызовы группы open за первую секунду работы утилиты: `strace -e openat sudo opensnoop-bpfcc`  
__Result__: Я предполагаю речь идет о файла: `libaudit.so`
```
vagrant@vagrant:~$ strace -e openat sudo opensnoop-bpfcc
(AT_FDCWD, "/etc/ld.so.cache", O_RDONLY|O_CLOEXEC) = 3
``` 

6 - Какой системный вызов использует `uname -a`  
__Result__: Самое близкое связанное с архитектурой системы - это вызов arch_prctl
Но, после лекции кажется надо написать: 
write(1, "Linux vagrant 5.4.0-58-generic #"..., 105Linux vagrant 5.4.0-58-generic #64-Ubuntu SMP Wed Dec 9 08:16:25 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux
) = 105
Альтернативный способ получить такую же информацию: cat /proc/version
Но это помог google, а не manual

7 - Чем отличается последовательность команд через ; и через && в bash: `man bash` (SHELL GRAMMAR)  
__Result__: Оператор __;__ используется для разделения команд, без учёта статус кода при выполнении
Оператор __&&__ аналогично разделяет команды, но выполняет следующую команду ТОЛЬКО если предыдущая выполнилась со статус кодом 0
Есть ли смысл использовать в bash &&, если применить set -e? 
Нет, выполнение скрипта остановится с этой опцией при первом не нулевом статусе

8 - Из каких опций состоит режим bash set -euxo pipefail: `help set`  
__Result__: Удобно тем, что при первой ошибке останавливает скрипт, и заставляет использовать переменные только из скрипта + лог выполнения команд.
```
-e  Exit immediately if a command exits with a non-zero status
-u  Treat unset variables as an error when substituting.
-x  Print commands and their arguments as they are executed.
-o pipefail the return value of a pipeline is the status of the last command to exit with a non-zero status, or zero if no command exited with a non-zero status
```

9 - Наиболее часто встречающийся статус у процессов в системе: `ps -o stat`  
__Result__: Ss (спящие процессы)
Дополнительная информация о процессе (приоритеты, многопоточность и тп)