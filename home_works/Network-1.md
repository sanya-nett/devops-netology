## 3.6. Компьютерные сети, лекция 1
 
1 - Классный аналог кино, жаль звука нет)

2 - Узнайте о том, сколько действительно независимых (не пересекающихся) каналов 
есть в разделяемой среде WiFi при работе на 2.4 ГГц  
__Result__: В основном для стандарта 2.4GHz - 14(13) каналов, из которых 3 
непересекающихся канала на полосе 20 МГц: (1, 6 и 11)  
Для стандарта 5GHz - 23 канала, из которых 5 непересекающихся при полосе в 80 МГц

3 - Какому производителю принадлежит MAC 38:f9:d3:55:55:79  
__Result__: Apple

4 - Каким будет payload TCP сегмента, если Ethernet MTU задан в 9001 байт, 
размер заголовков IPv4 – 20 байт, а TCP – 32 байта  
__Result__: `8949` = 9001 - 20 - 32

5 - Может ли во флагах TCP одновременно быть установлены флаги SYN и FIN при штатном режиме работы сети? 
Почему да или нет  
__Result__: Обычно нет, так как это взаимоисключающие операции для установки и завершения соединения  
Однако гугл говорит, что такое физически может быть, но система будет обрабатывать непредсказуемо 

6 - Почему в `State` присутствует только `UNCONN`, и может ли там присутствовать, например, `TIME-WAIT`  
__Result__: так как порт находится в режиме слушателя, может когда переключаются в режим TCP и ожидает завершения 
соединения

7 - Обладая знаниями о том, как штатным образом завершается соединение (FIN от инициатора, FIN-ACK от ответчика, 
ACK от инициатора), опишите в каких состояниях будет находиться TCP соединение в каждый момент времени на клиенте 
и на сервере при завершении. Схема переходов состояния соединения вам в этом поможет.  
__Result__:  
ESTABLISHED Client -> FIN -> Server ESTABLISHED  
FIN WAIT 1  Client <- ACK <- Server CLOSE WAIT  
FIN WAIT 2  Client <- FIN <- Server LAST ACK  
TIME WAIT   Client -> ACK -> Server CLOSED  
CLOSED      Client

8 - TCP порт – 16 битное число. Предположим, 2 находящихся в одной сети хоста устанавливают между собой соединения. 
Каким будет теоретическое максимальное число соединений, ограниченное только лишь параметрами 
L4, которое параллельно может установить клиент с одного IP адреса к серверу с одним IP адресом? 
Сколько соединений сможет обслужить сервер от одного клиента? 
А если клиентов больше одного?  
__Result__: 2 в 16 = 65536 соединений от одного клиента, теоретически для vm 60999 - 32768 = `28231` 
```
vagrant@vagrant:~$ sysctl net.ipv4.ip_local_port_range
net.ipv4.ip_local_port_range = 32768    60999
```

9 - Может ли сложиться ситуация, при которой большое число соединений TCP 
на хосте находятся в состоянии `TIME-WAIT`? Если да, то является ли она 
хорошей или плохой? Подкрепите свой ответ пояснением той или иной оценки  
__Result__: может, если происходит большое взаимодействие коротких соединений, 
кажется ничего страшного, так как в системе есть настройка тайм-аута, когда хост 
будет дожидаться подтверждения закрытия соединения. Возможно, может быть проблема,
если соединения не закрываются и остаются в этом статусе, тогда можно упереться 
в максимальное кол-во соединений, которая машина может поддерживать

10 - Чем особенно плоха фрагментация UDP относительно фрагментации TCP  
__Result__: кажется очевидный ответ, что при фрагментации UDP может произойти потеря 
и исходная датаграмма не соберется

11 - Если бы вы строили систему удаленного сбора логов, то есть систему, в которой несколько хостов отправляют 
на центральный узел генерируемые приложениями логи (предположим, что логи – текстовая информация), 
какой протокол транспортного уровня вы выбрали бы и почему? 
Проверьте ваше предположение самостоятельно, узнав о стандартном протоколе `syslog`  
__Result__: я бы выбрал UDP протокол, чтобы обеспечить производительность +
некритично потерять несколько логов. Порядок тоже не важен, так как в самим логах будут
тайм метки, и система мониторинга уже сама будет фильтровать по временным рядам.  
Однако syslog использует и UDP и TCP протоколы в зависимости от необходимости ГД, логично.

12 - Сколько портов TCP находится в состоянии прослушивания на вашей виртуальной машине с Ubuntu, 
и каким процессам они принадлежат  
__Result__: три
```
vagrant@vagrant:~$ sudo netstat -4 -apt | grep LISTEN
tcp        0      0 0.0.0.0:sunrpc          0.0.0.0:*               LISTEN      1/init
tcp        0      0 localhost:domain        0.0.0.0:*               LISTEN      595/systemd-resolve
tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN      817/sshd: /usr/sbin
```

13 - Какой ключ нужно добавить в `tcpdump`, чтобы он начал выводить не только заголовки, но и содержимое фреймов 
в текстовом виде? А в текстовом и шестнадцатеричном?  
__Result__: `tcpdump -A` для ASCII отображения, `tcpdump -XX` для HEX и ASCII отображения

14 - Попробуйте собрать дамп трафика с помощью tcpdump на основном интерфейсе вашей виртуальной машины 
и посмотреть его через tshark или Wireshark (можно ограничить число пакетов 
`-c 100`). Встретились ли вам какие-то установленные флаги Internet Protocol 
(не флаги TCP, а флаги IP)? Узнайте, какие флаги бывают. Как на самом деле 
называется стандарт Ethernet, фреймы которого попали в ваш дамп? 
Можно ли где-то в дампе увидеть OUI?  
_Result__:  нет, не встретились, википедия говорит, что есть флаги фрагментации: 0, 1 (DF), 2 (MF)  
Если я правильно понял, то Ethernet называется Ethernet II  
OUI я видел при ARP запросах, когда опрашивался кто есть на таком-то IP