## 5.3. Контейнеризация на примере Docker
 
1 - Посмотрите на сценарий ниже и ответьте на вопрос: "Подходит ли в этом сценарии использование докера? Или лучше 
подойдет виртуальная машина, физическая машина? Или возможны разные варианты?"

Детально опишите и обоснуйте свой выбор.

Сценарий:

- Высоконагруженное монолитное java веб-приложение;  
  __Result__: я бы использовал физическую машинку, так как это монолит
- Go-микросервис для генерации отчетов;  
  __Result__: нужно в докер, скорее всего этот сервис работает с источником данных и отправляет 
  отчеты куда-то дальше, можно перезапускать без проблем + 1 приложение в 1 контейнере
- Nodejs веб-приложение;  
  __Result__: нужно в докер, это клиент, перезапустить контейнер можно будет без проблем
- Мобильное приложение c версиями для Android и iOS;  
  __Result__: однозначно нужно использовать виртуальные машины, чтобы обеспечить близкое поведение 
  к реальным устройствам
- База данных postgresql используемая, как кэш;  
  __Result__: думаю можно в докер, в случае проблемы можно пожертвовать кэшом
- Шина данных на базе Apache Kafka;  
  __Result__: скорее всего железная машинка, так как требуется высокая скорость работы 
  и потеря данных критична
- Очередь для Logstash на базе Redis;  
  __Result__: думаю можно в докер, в случае проблемы можно грохнуть очередь
- Elastic stack для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и 
  две ноды kibana;  
  __Result__: кажется, что можно в докер, если хранилище данных крутится где-то еще
- Мониторинг-стек на базе prometheus и grafana;  
  __Result__: сами приложения, можно в докер
- Mongodb, как основное хранилище данных для java-приложения;  
  __Result__: Я бы наверное не использовал для этого контейнер, так как в случае ошибки будет 
  потеря всех данных
- Jenkins-сервер.  
  __Result__: Возможно использование всех вариантов, главное пробросить порты и 
  для докера сохранять настройки женкинса вне контейнера 


2 - Сценарий выполнения задачи:

- создайте свой репозиторий на докерхаб;
- выберете любой образ, который содержит апачи веб-сервер;
- создайте свой форк образа;
- реализуйте функциональность: запуск веб-сервера в фоне с индекс-страницей  
__Result__: https://hub.docker.com/r/ascherba/apache-static
  
3 - Cценарий задачи:
- Запустите первый контейнер из образа centos c любым тэгом в фоновом режиме, подключив папку info из текущей 
  рабочей директории на хостовой машине в /share/info контейнера;  
  `docker run -dti -v ~/info:/share/info --name centos centos:7 bash`
- Запустите второй контейнер из образа debian:latest в фоновом режиме, подключив папку info из текущей рабочей 
  директории на хостовой машине в /info контейнера;  
  `docker run -dti -v ~/info:/info --name debian debian:latest bash`
- Подключитесь к первому контейнеру с помощью exec и создайте текстовый файл любого содержания в /share/info ;  
  `docker exec centos bash -c "echo hello > /share/info/test"`
- Добавьте еще один файл в папку info на хостовой машине;  
  `echo mystery > ~/info/magic`
- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в /info контейнера.  
``` commandline
docker exec debian bash -c "ls /info"
> magic
> test
docker exec debian bash -c "cat /info/test"
> hello
docker exec debian bash -c "cat /info/magic"
> mystery
```